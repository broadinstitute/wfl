
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Arrays - Workflow Launcher</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab28b872.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="green" data-md-color-accent="teal">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#arrays-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="Workflow Launcher" class="md-header-nav__button md-logo" aria-label="Workflow Launcher">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Workflow Launcher
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Arrays
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/broadinstitute/wfl/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Workflow Launcher" class="md-nav__button md-logo" aria-label="Workflow Launcher">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Workflow Launcher
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/broadinstitute/wfl/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Get Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Development Guide
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Development Guide" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Development Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-process/" class="md-nav__link">
      Development Process and Tips
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-sandbox/" class="md-nav__link">
      Local Development SandBox
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-logging/" class="md-nav__link">
      Logging
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-deployment/" class="md-nav__link">
      Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-frontend/" class="md-nav__link">
      Frontend
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Modules
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Modules" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../modules-general/" class="md-nav__link">
      General
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Arrays
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Arrays
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workload-model" class="md-nav__link">
    Workload Model
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../dev-wgs/" class="md-nav__link">
      Whole Genome
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../external-exome-reprocessing/" class="md-nav__link">
      External Exome
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Readings
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Readings" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        Readings
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../terra/" class="md-nav__link">
      WorkFlow Launcher's Role in Terra
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#api" class="md-nav__link">
    API
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#workload-model" class="md-nav__link">
    Workload Model
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/broadinstitute/wfl/edit/master/docs/modules-arrays.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="arrays-module">Arrays module<a class="headerlink" href="#arrays-module" title="Permanent link">&para;</a></h1>
<p>WorkFlow Launcher (WFL) implements <code>aou-arrays</code> module to
support secure and efficient processing of the AllOfUs Arrays
samples. This page documents the design principles and assumptions
of the module as well as summarizes the general process of module
development.</p>
<p><code>aou-arrays</code> module implements arrays workload as a <strong>continuous workload</strong>, which
means all samples are coming in like a continuous stream, and WFL does not make
any assumption of how many samples will be in the workload or how to group the
samples together: it hands off the workload creation and starting process to its
caller.</p>
<h3 id="api">API<a class="headerlink" href="#api" title="Permanent link">&para;</a></h3>
<p><code>aou-arrays</code> module, like others, implements the following <em>multimethod dispatchers</em>:</p>
<ul>
<li>start-workload!</li>
<li>add-workload!</li>
</ul>
<p>It supports the following API endpoints:</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Endpoint</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td><code>/api/v1/workload</code></td>
<td>List all workloads</td>
</tr>
<tr>
<td>GET</td>
<td><code>/api/v1/workload/{uuid}</code></td>
<td>Query for a workload by its UUID</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/v1/create</code></td>
<td>Create a new workload</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/v1/start</code></td>
<td>Start a or multiple workload(s)</td>
</tr>
<tr>
<td>POST</td>
<td><code>/api/v1/append_to_aou</code></td>
<td>Append a new or multiple sample(s) to an existing AOU workload</td>
</tr>
</tbody>
</table>
<p>Different from the fixed workload types that caller only needs to create a workload with a series of sample inputs and
then simply start the workload, <code>aou-arrays</code> module requires the caller to manage the life cycle of a workload on their
own in a multi-stage manner:</p>
<ol>
<li>The caller needs to create a workload and specify the type to be <code>AllOfUsArrays</code>, the caller will receive the
information of the created workload if everything goes well, one of which is the <code>uuid</code> of the workload.</li>
<li>Once the workload information is being reviewed, the caller needs to "start" the newly created workload to
tell WFL that "this workload is ready to accept incoming samples". Without this "start" signal WFL will
refuse to append any sample to this workload.</li>
<li>The caller can append new individual samples to an existing started workload, and these new samples will be
analyzed, processed and submitted to Cromwell as long as it has valid information.</li>
</ol>
<p>To give more information, here are some example inputs to the above endpoints:</p>
<p><strong>GET /api/v1/workload</strong></p>
<div class="highlight"><pre><span></span><code>curl <span class="s2">&quot;http://localhost:8080/api/v1/workload&quot;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Accept: application/json&#39;</span>
</code></pre></div>
<p><strong>GET /api/v1/workload/{uuid}</strong></p>
<div class="highlight"><pre><span></span><code>curl <span class="s2">&quot;http://localhost:8080/api/v1/workload?uuid=00000000-0000-0000-0000-000000000000&quot;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Accept: application/json&#39;</span>
</code></pre></div>
<p><strong>GET /api/v1/workload/create</strong></p>
<div class="highlight"><pre><span></span><code>curl -X <span class="s2">&quot;POST&quot;</span> <span class="s2">&quot;http://localhost:8080/api/v1/create&quot;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
     -d <span class="s1">$&#39;{&quot;cromwell&quot;: &quot;https://cromwell-gotc-auth.gotc-dev.broadinstitute.org/&quot;,</span>
<span class="s1">           &quot;input&quot;: &quot;aou-inputs-placeholder&quot;,</span>
<span class="s1">           &quot;output&quot;: &quot;aou-outputs-placeholder&quot;,</span>
<span class="s1">           &quot;project&quot;: &quot;gotc-dev&quot;,</span>
<span class="s1">           &quot;creator&quot;: &quot;rex&quot;,</span>
<span class="s1">           &quot;pipeline&quot;: &quot;AllOfUsArrays&quot;,</span>
<span class="s1">           &quot;items&quot;: [</span>
<span class="s1">             {}</span>
<span class="s1">           ]}&#39;</span>
</code></pre></div>
<p><strong>GET /api/v1/workload/start</strong></p>
<div class="highlight"><pre><span></span><code>curl -X <span class="s2">&quot;POST&quot;</span> <span class="s2">&quot;http://localhost:8080/api/v1/start&quot;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
     -d <span class="s1">$&#39;[</span>
<span class="s1">  {</span>
<span class="s1">    &quot;uuid&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;</span>
<span class="s1">  }</span>
<span class="s1">]&#39;</span>
</code></pre></div>
<p><strong>GET /api/v1/workload/append_to_aou</strong></p>
<div class="highlight"><pre><span></span><code>curl -X <span class="s2">&quot;POST&quot;</span> <span class="s2">&quot;http://localhost:8080/api/v1/append_to_aou&quot;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Accept: application/json&#39;</span> <span class="se">\</span>
     -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
     -d <span class="s1">$&#39;{</span>
<span class="s1">  &quot;environment&quot;: &quot;aou-dev&quot;,</span>
<span class="s1">  &quot;cromwell&quot;: &quot;https://cromwell-gotc-auth.gotc-dev.broadinstitute.org/&quot;,</span>
<span class="s1">  &quot;uuid&quot;: &quot;00000000-0000-0000-0000-000000000000&quot;,</span>
<span class="s1">  &quot;notifications&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">      &quot;zcall_thresholds_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;sample_lsid&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;bead_pool_manifest_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;chip_well_barcode&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;sample_alias&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;green_idat_cloud_path&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;red_idat_cloud_path&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;cluster_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;reported_gender&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;gender_cluster_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;params_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;extended_chip_manifest_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;analysis_version_number&quot;: 1</span>
<span class="s1">    },</span>
<span class="s1">    {</span>
<span class="s1">      &quot;zcall_thresholds_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;sample_lsid&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;bead_pool_manifest_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;chip_well_barcode&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;sample_alias&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;green_idat_cloud_path&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;red_idat_cloud_path&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;cluster_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;reported_gender&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;gender_cluster_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;params_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;extended_chip_manifest_file&quot;: &quot;foo&quot;,</span>
<span class="s1">      &quot;analysis_version_number&quot;: 5</span>
<span class="s1">    }</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<h3 id="workload-model">Workload Model<a class="headerlink" href="#workload-model" title="Permanent link">&para;</a></h3>
<p>WFL designed the following workload model in order to support the above API and workload submission mechanism.</p>
<p>Initially, it has the following schema:</p>
<div class="highlight"><pre><span></span><code>                                    List of relations
 Schema |              Name              |   Type   |  Owner   |    Size    | Description
--------+--------------------------------+----------+----------+------------+-------------
 public | databasechangelog              | table    | foo      | 16 kB      |
 public | databasechangeloglock          | table    | foo      | 8192 bytes |
 public | workload                       | table    | foo      | 16 kB      |
 public | workload_id_seq                | sequence | foo      | 8192 bytes |
</code></pre></div>
<p>the <code>workload</code> table looks like:</p>
<div class="highlight"><pre><span></span><code> id | commit | created | creator | cromwell | finished | input | items | output | pipeline | project | release | started | uuid | version | wdl
----+--------+---------+---------+----------+----------+-------+-------+--------+----------+---------+---------+---------+------+---------+-----
(0 rows)
</code></pre></div>
<p>Note that different from the fixed workload types, <code>input</code>, <code>output</code> and <code>items</code> are not useful to <code>aou-arrays</code> workload
since these fields vary from sample to sample. Any information the caller provided to these fields will stored as
placeholders.</p>
<p>More importantly, eve though <code>id</code> is the <code>primary</code> key here, <code>(pipeline, project, release)</code> works as the
unique identifier for arrays workloads, for instance, if there's already a workload with values:
<code>(AllOfUsArrays, gotc-dev, Arrays_v1.9)</code>, any further attempts to create a new workload with exact the same values
will return the information of this existing workload rather than create a new row.</p>
<p>Once the caller successfully creates a new sample, there will be a new row added to the above <code>workload</code> table, and a
new table will be created accordingly:</p>
<div class="highlight"><pre><span></span><code>                                    List of relations
 Schema |              Name              |   Type   |  Owner   |    Size    | Description
--------+--------------------------------+----------+----------+------------+-------------
 public | allofusarrays_000000001        | table    | foo      | 16 kB      |
 public | allofusarrays_000000001_id_seq | sequence | foo      | 8192 bytes |
 public | databasechangelog              | table    | foo      | 16 kB      |
 public | databasechangeloglock          | table    | foo      | 8192 bytes |
 public | workload                       | table    | foo      | 16 kB      |
 public | workload_id_seq                | sequence | foo      | 8192 bytes |
</code></pre></div>
<p>The <code>allofusarrays_00000000X</code> table has the following fields:</p>
<p><div class="highlight"><pre><span></span><code> id | analysis_version_number | chip_well_barcode |  status   |            updated            |                 uuid
----+-------------------------+-------------------+-----------+-------------------------------+--------------------------------------
  1 |                       1 | 0000000000_R01C01 | Succeeded | 2020-07-21 00:00:00.241218-04 | 00000000-0000-0000-0000-000000000000
  2 |                       5 | 0000000000_R01C01 | Failed    | 2020-07-21 00:00:00.028976-04 | 00000000-0000-0000-0000-000000000000
</code></pre></div>
Among which <code>(analysis_version_number, chip_well_barcode)</code> works as the <code>primary key</code>, any new samples that collide
with the existing <code>primary-keys</code> will be omitted.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../modules-general/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                General
              </div>
            </div>
          </a>
        
        
          <a href="../dev-wgs/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Whole Genome
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/broadinstitute/wfl" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>