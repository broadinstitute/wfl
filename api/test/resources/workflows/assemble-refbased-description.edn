{:valid                   true,
 :isRunnableWorkflow      true,
 :errors                  [],
 :meta                    {:description "Reference-based microbial consensus calling. Aligns NGS reads to a singular reference genome, calls a new consensus sequence, and emits: new assembly, reads aligned to provided reference, reads aligned to new assembly, various figures of merit, plots, and QC metrics. The user may provide unaligned reads spread across multiple input files and this workflow will parallelize alignment per input file before merging results prior to consensus calling.",
                           :author      "Broad Viral Genomics",
                           :email       "viral-ngs@broadinstitute.org"},
 :images                  [],
 :name                    "assemble_refbased",
 :importedDescriptorTypes [],
 :validWorkflow           true,
 :submittedDescriptorType {:descriptorType "WDL", :descriptorTypeVersion "1.0"},
 :parameterMeta           {:assembly_length_unambiguous
                           {:description "The number of called consensus bases in assembly_fasta (excludes regions of the genome that lack read coverage)"},
                           :trim_coords_bed
                           {:description "optional primers to trim in reference coordinate space (0-based BED format)",
                            :patterns    ["*.bed"],
                            :category    "common"},
                           :novocraft_license
                           {:description "The default Novoalign short read aligner is a commercially licensed software that is available in a much slower, single-threaded version for free. If you have a paid license file, provide it here to run in multi-threaded mode. If this is omitted, it will run in single-threaded mode.",
                            :patterns    ["*.lic"]},
                           :sample_name
                           {:description "Base name of output files. The 'SM' field in BAM read group headers are also rewritten to this value. Avoid spaces and other filename-unfriendly characters.",
                            :category    "common"},
                           :aligner
                           {:description "Read aligner software to use. Options: novoalign, bwa, minimap2. Minimap2 can automatically handle Illumina, PacBio, or Oxford Nanopore reads as long as the 'PL' field in the BAM read group header is set properly (novoalign and bwa are Illumina-only)."},
                           :assembly_length
                           {:description "The length of the sequence described in assembly_fasta, inclusive of any uncovered regions denoted by Ns"},
                           :align_to_ref_variants_vcf_gz
                           {:description "All variants in the input reads against the original reference genome. This VCF file is used to create the assembly_fasta"},
                           :reads_unmapped_bams
                           {:description "Unaligned reads in BAM format"
                            :patterns    ["*.bam"]},
                           :min_coverage
                           {:description "Minimum read coverage required to call a position unambiguous."},
                           :reference_fasta
                           {:description "Reference genome to align reads to.",
                            :patterns    ["*.fasta"]},
                           :skip_mark_dupes
                           {:description "skip Picard MarkDuplicates step after alignment. This is recommended to be set to true for PCR amplicon based data. (Default: false)"},
                           :assembly_fasta
                           {:description "The new assembly / consensus sequence for this sample"}},
 :inputs
                          [{:name            "align_to_ref.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "align_to_ref.machine_mem_gb",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "align_to_ref.sample_name",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "String"}},
                            :typeDisplayName "String?",
                            :optional        true,
                            :default         nil}
                           {:name            "align_to_self.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "align_to_self.machine_mem_gb",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "align_to_self.sample_name",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "String"}},
                            :typeDisplayName "String?",
                            :optional        true,
                            :default         nil}
                           {:name            "aligner",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"minimap2\""}
                           {:name            "call_consensus.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-assemble:2.1.16.1\""}
                           {:name            "call_consensus.machine_mem_gb",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "call_consensus.major_cutoff",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Float"}},
                            :typeDisplayName "Float?",
                            :optional        true,
                            :default         "0.5"}
                           {:name            "call_consensus.mark_duplicates",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Boolean"}},
                            :typeDisplayName "Boolean?",
                            :optional        true,
                            :default         "false"}
                           {:name            "ivar_trim.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"andersenlabapps/ivar:1.3.1\""}
                           {:name            "ivar_trim.machine_mem_gb",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "ivar_trim.min_keep_length",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "ivar_trim.min_quality",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         "1"}
                           {:name            "ivar_trim.sliding_window",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "Int"}},
                            :typeDisplayName "Int?",
                            :optional        true,
                            :default         nil}
                           {:name            "merge_align_to_ref.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "merge_align_to_ref.reheader_table",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "File"}},
                            :typeDisplayName "File?",
                            :optional        true,
                            :default         nil}
                           {:name            "merge_align_to_self.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "merge_align_to_self.reheader_table",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "File"}},
                            :typeDisplayName "File?",
                            :optional        true,
                            :default         nil}
                           {:name            "min_coverage",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int",
                            :optional        true,
                            :default         "3"}
                           {:name            "novocraft_license",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "File"}},
                            :typeDisplayName "File?",
                            :optional        true,
                            :default         nil}
                           {:name            "plot_ref_coverage.bin_large_plots",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "plot_ref_coverage.binning_summary_statistic",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "String"}},
                            :typeDisplayName "String?",
                            :optional        true,
                            :default         "\"max\""}
                           {:name            "plot_ref_coverage.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "plot_ref_coverage.plot_only_non_duplicates",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "plot_ref_coverage.skip_mark_dupes",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "plot_self_coverage.bin_large_plots",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "plot_self_coverage.binning_summary_statistic",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "String"}},
                            :typeDisplayName "String?",
                            :optional        true,
                            :default         "\"max\""}
                           {:name            "plot_self_coverage.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "plot_self_coverage.plot_only_non_duplicates",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "plot_self_coverage.skip_mark_dupes",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "reads_unmapped_bams",
                            :valueType       {:typeName "Array", :arrayType {:typeName "File"}, :nonEmpty true},
                            :typeDisplayName "Array[File]+",
                            :optional        false,
                            :default         nil}
                           {:name            "reference_fasta",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File",
                            :optional        false,
                            :default         nil}
                           {:name            "run_discordance.docker",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String",
                            :optional        true,
                            :default         "\"quay.io/broadinstitute/viral-core:2.1.19\""}
                           {:name            "sample_name",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "String"}},
                            :typeDisplayName "String?",
                            :optional        true,
                            :default         nil}
                           {:name            "skip_mark_dupes",
                            :valueType       {:typeName "Boolean"},
                            :typeDisplayName "Boolean",
                            :optional        true,
                            :default         "false"}
                           {:name            "trim_coords_bed",
                            :valueType       {:typeName "Optional", :optionalType {:typeName "File"}},
                            :typeDisplayName "File?",
                            :optional        true,
                            :default         nil}],
 :outputs
                          [{:name            "align_to_ref_merged_aligned_trimmed_only_bam",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_ref_merged_bases_aligned",
                            :valueType       {:typeName "Float"},
                            :typeDisplayName "Float"}
                           {:name            "align_to_ref_merged_coverage_plot",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_ref_merged_coverage_tsv",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_ref_merged_read_pairs_aligned",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "align_to_ref_merged_reads_aligned",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "align_to_ref_per_input_aligned_flagstat",
                            :valueType       {:typeName "Array", :arrayType {:typeName "File"}, :nonEmpty false},
                            :typeDisplayName "Array[File]"}
                           {:name            "align_to_ref_per_input_fastqc",
                            :valueType       {:typeName "Array", :arrayType {:typeName "File"}, :nonEmpty false},
                            :typeDisplayName "Array[File]"}
                           {:name            "align_to_ref_per_input_reads_aligned",
                            :valueType       {:typeName "Array", :arrayType {:typeName "Int"}, :nonEmpty false},
                            :typeDisplayName "Array[Int]"}
                           {:name            "align_to_ref_per_input_reads_provided",
                            :valueType       {:typeName "Array", :arrayType {:typeName "Int"}, :nonEmpty false},
                            :typeDisplayName "Array[Int]"}
                           {:name            "align_to_ref_variants_vcf_gz",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_ref_viral_core_version",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String"}
                           {:name            "align_to_self_merged_aligned_only_bam",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_self_merged_bases_aligned",
                            :valueType       {:typeName "Float"},
                            :typeDisplayName "Float"}
                           {:name            "align_to_self_merged_coverage_plot",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_self_merged_coverage_tsv",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "align_to_self_merged_mean_coverage",
                            :valueType       {:typeName "Float"},
                            :typeDisplayName "Float"}
                           {:name            "align_to_self_merged_read_pairs_aligned",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "align_to_self_merged_reads_aligned",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "assembly_fasta",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "assembly_length",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "assembly_length_unambiguous",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "assembly_mean_coverage",
                            :valueType       {:typeName "Float"},
                            :typeDisplayName "Float"}
                           {:name            "dist_to_ref_indels",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "dist_to_ref_snps",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "ivar_version",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String"}
                           {:name            "num_libraries",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "num_read_groups",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "reference_genome_length",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "replicate_concordant_sites",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "replicate_discordant_indels",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "replicate_discordant_snps",
                            :valueType       {:typeName "Int"},
                            :typeDisplayName "Int"}
                           {:name            "replicate_discordant_vcf",
                            :valueType       {:typeName "File"},
                            :typeDisplayName "File"}
                           {:name            "viral_assemble_version",
                            :valueType       {:typeName "String"},
                            :typeDisplayName "String"}]}
