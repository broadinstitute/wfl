
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../staged-api-usage/">
      
      
        <link rel="next" href="../staged-executor/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.21">
    
    
      
        <title>Source - Workflow Launcher</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#source" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Workflow Launcher" class="md-header__button md-logo" aria-label="Workflow Launcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Workflow Launcher
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Source
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="teal"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/broadinstitute/wfl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Workflow Launcher" class="md-nav__button md-logo" aria-label="Workflow Launcher" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Workflow Launcher
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/broadinstitute/wfl" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Development Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Development Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-process/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development Process and Tips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-release/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Process
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Staged Workloads
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Staged Workloads
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../staged-workload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../staged-api-usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Source
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Source
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      User Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terra-datarepo-source" class="md-nav__link">
    <span class="md-ellipsis">
      Terra DataRepo Source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terra DataRepo Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table" class="md-nav__link">
    <span class="md-ellipsis">
      table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshotreaders" class="md-nav__link">
    <span class="md-ellipsis">
      snapshotReaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-pollingintervalminutes" class="md-nav__link">
    <span class="md-ellipsis">
      Optional pollingIntervalMinutes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-loadtag" class="md-nav__link">
    <span class="md-ellipsis">
      Optional loadTag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdr-snapshots-source" class="md-nav__link">
    <span class="md-ellipsis">
      TDR Snapshots Source
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Developer Guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../staged-executor/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Executor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../staged-sink/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sink
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Module-Specific Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Module-Specific Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules-general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules-aou-arrays/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Arrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules-external-exome-reprocessing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External Exome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules-sg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Somatic Genomes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modules-wgs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Whole Genome
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    General Usage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            General Usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage-workflow-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Workflow Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage-across-directory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage Across a Directory
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage-retry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Retrying Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage-abort/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Aborting a Workload
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Readings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Readings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../terra/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    WorkFlow Launcher's Role in Terra
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#user-guide" class="md-nav__link">
    <span class="md-ellipsis">
      User Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="User Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#terra-datarepo-source" class="md-nav__link">
    <span class="md-ellipsis">
      Terra DataRepo Source
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Terra DataRepo Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dataset" class="md-nav__link">
    <span class="md-ellipsis">
      dataset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table" class="md-nav__link">
    <span class="md-ellipsis">
      table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#snapshotreaders" class="md-nav__link">
    <span class="md-ellipsis">
      snapshotReaders
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-pollingintervalminutes" class="md-nav__link">
    <span class="md-ellipsis">
      Optional pollingIntervalMinutes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-loadtag" class="md-nav__link">
    <span class="md-ellipsis">
      Optional loadTag
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tdr-snapshots-source" class="md-nav__link">
    <span class="md-ellipsis">
      TDR Snapshots Source
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#developer-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Developer Guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="source">Source<a class="headerlink" href="#source" title="Permanent link">⚓︎</a></h1>
<p>The workload <code>Source</code> models the first stage of a processing pipeline.
A <code>Source</code> reads workflow inputs from a specified location
or service in the cloud.</p>
<h2 id="user-guide">User Guide<a class="headerlink" href="#user-guide" title="Permanent link">⚓︎</a></h2>
<p>You can configure the type of <code>Source</code> used in your workload by changing the
<code>source</code> attribute of your workload request.</p>
<h3 id="terra-datarepo-source"><code>Terra DataRepo</code> Source<a class="headerlink" href="#terra-datarepo-source" title="Permanent link">⚓︎</a></h3>
<p>You can configure workflow-launcher to fetch workflow inputs
from a Terra Data Repository (TDR) dataset in real-time
using the <code>Terra DataRepo</code> source.</p>
<p><code>Terra DataRepo</code> source polls a <code>dataset.table</code>'s row metadata table
for newly ingested rows.
It snapshots those rows for downstream processing by an <code>Executor</code>.
The <code>Terra DataRepo</code> source can only read inputs from a single table.</p>
<p>When you <code>start</code> the workload, the <code>Terra DataRepo</code> source will start looking
for new rows from that instant.</p>
<p>When you <code>stop</code> the workload, the <code>Terra DataRepo</code> source will stop looking
for new rows from that instant. All pending snapshots may continue
to be processed by a later workload stage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>workflow-launcher creates snapshots of your data to be processed by a
later stage of the workload. Therefore, you must ensure the account
<code>workflow-launcher@firecloud.org</code> is a <code>custodian</code> of your dataset.</p>
</div>
<p>A typical <code>Terra DataRepo</code> source configuration in the workload request looks
like:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Terra DataRepo&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;dataset&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{dataset-id}&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;table&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{dataset-table-name}&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;snapshotReaders&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;{user}@{domain}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="err">...</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;pollingIntervalMinutes&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;loadTag&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;{load-tag-to-poll}&quot;</span>
<span class="p">}</span>
</code></pre></div>
The table below summarises the purpose of each attribute in the above request.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Selects the <code>Terra DataRepo</code> source implementation.</td>
</tr>
<tr>
<td><code>dataset</code></td>
<td>The <code>UUID</code> of dataset to monitor and read from.</td>
</tr>
<tr>
<td><code>table</code></td>
<td>The name of the <code>dataset</code> table to monitor and read from.</td>
</tr>
<tr>
<td><code>snapshotReaders</code></td>
<td>A list of email addresses to set as <code>readers</code> of all snapshots created in this workload.</td>
</tr>
<tr>
<td><code>pollingIntervalMinutes</code></td>
<td>Optional.  Rate at which WFL will poll TDR for new rows to snapshot.</td>
</tr>
<tr>
<td><code>loadTag</code></td>
<td>Optional.  Snapshot only new rows ingested with <code>loadTag</code>.</td>
</tr>
</tbody>
</table>
<h4 id="dataset"><code>dataset</code><a class="headerlink" href="#dataset" title="Permanent link">⚓︎</a></h4>
<p>The <code>UUID</code> uniquely identifying the TDR dataset which WFL will poll
for new workflow inputs.</p>
<h4 id="table"><code>table</code><a class="headerlink" href="#table" title="Permanent link">⚓︎</a></h4>
<p>The name of the table in <code>dataset</code> which WFL will poll
for new workflow inputs.</p>
<p>You should design this table such that
each row contains all the inputs required to execute a workflow by the workload
<code>Executor</code> downstream.</p>
<h4 id="snapshotreaders"><code>snapshotReaders</code><a class="headerlink" href="#snapshotreaders" title="Permanent link">⚓︎</a></h4>
<p>The email addresses of those whom should be "readers" of all snapshots created
by workflow-launcher in this workload. You can specify individual users and/or
Terra/Firecloud groups.</p>
<h4 id="optional-pollingintervalminutes">Optional <code>pollingIntervalMinutes</code><a class="headerlink" href="#optional-pollingintervalminutes" title="Permanent link">⚓︎</a></h4>
<p>The rate, in minutes, at which WFL will poll TDR for new rows to snapshot.
If not provided, the default interval is 20 minutes.</p>
<h4 id="optional-loadtag">Optional <code>loadTag</code><a class="headerlink" href="#optional-loadtag" title="Permanent link">⚓︎</a></h4>
<p>Specifying a <code>loadTag</code>
restricts the set of new rows
that WFL will include in a snapshot.
The <code>loadTag</code> specifies
a prefix to be matched
against the <code>loadTag</code> used
to ingest data to TDR.
Thus <code>my-ingest-tag</code> matches
all of the following load tags.</p>
<div class="codehilite"><pre><span></span><code>- `my-ingest-tag`
- `my-ingest-tag-`
- `my-ingest-tag-0`
- `my-ingest-tag-a`
- `my-ingest-tag-2022-07-14
</code></pre></div>

<p>When not provided,
all new rows will be eligible
for snapshotting.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When initiating a TDR ingest, one can optionally set a load tag.
Each row ingested will have this load tag set in its corresponding
TDR row metadata table (only visible in BigQuery and not TDR UI).
The same load tag can be reused across multiple ingests to logically link them.</p>
<p>For questions on how to set the load tag for a particular flavor of ingest,
contact #dsp-jade</p>
</div>
<h3 id="tdr-snapshots-source"><code>TDR Snapshots</code> Source<a class="headerlink" href="#tdr-snapshots-source" title="Permanent link">⚓︎</a></h3>
<p>You can configure workflow-launcher to use a list of TDR snapshots directly.
This may be useful if you don't want workflow-launcher to be a custodian of your
dataset or if you already have snapshots you want to process. In this case you
must ensure that <code>workflow-launcher@firecloud.org</code> is a <code>reader</code> of all
snapshots you want it to process.</p>
<p>A typical <code>TDR Snapshots</code> source configuration in the workload request looks
like:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TDR Snapshots&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;snapshots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="s2">&quot;{snapshot-id}&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="err">...</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<p>The table below summarises the purpose of each attribute in the above request.</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Selects the <code>TDR Snapshots</code> source implementation.</td>
</tr>
<tr>
<td><code>snapshots</code></td>
<td>A List of <code>UUID</code>s of snapshots to process.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You must ensure that the snapshots you list are compatible with the
downstream processing stage that consumes them.</p>
</div>
<h2 id="developer-guide">Developer Guide<a class="headerlink" href="#developer-guide" title="Permanent link">⚓︎</a></h2>
<p>A source is a <code>Queue</code> that satisfies the <code>Source</code> protocol below:
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="kd">defprotocol </span><span class="nv">Source</span>
<span class="w">  </span><span class="p">(</span><span class="nf">start-source!</span>
<span class="w">    </span><span class="o">^</span><span class="nv">Unit</span>
<span class="w">    </span><span class="p">[</span><span class="o">^</span><span class="nv">Connection</span><span class="w"> </span><span class="nv">transaction</span><span class="w">  </span><span class="c1">;; JDBC Connection</span>
<span class="w">     </span><span class="o">^</span><span class="nv">Source</span><span class="w">     </span><span class="nv">source</span><span class="w">       </span><span class="c1">;; This source instance</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">    </span><span class="s">&quot;Start enqueuing items onto the `source`&#39;s queue to be consumed by a later</span>
<span class="s">     processing stage. This operation should not perform any long-running</span>
<span class="s">     external effects other than database operations via the `transaction`. This</span>
<span class="s">     function is called at most once during a workload&#39;s operation.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">stop-source!</span>
<span class="w">    </span><span class="o">^</span><span class="nv">Unit</span>
<span class="w">    </span><span class="p">[</span><span class="o">^</span><span class="nv">Connection</span><span class="w"> </span><span class="nv">transaction</span><span class="w">  </span><span class="c1">;; JDBC Connection</span>
<span class="w">     </span><span class="o">^</span><span class="nv">Source</span><span class="w">     </span><span class="nv">source</span><span class="w">       </span><span class="c1">;; This source instance</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">    </span><span class="s">&quot;Stop enqueuing inputs onto the `source`&#39;s queue to be consumed by a later</span>
<span class="s">     processing stage. This operation should not perform any long-running</span>
<span class="s">     external effects other than database operations via the `transaction`. This</span>
<span class="s">     function is called at most once during a workload&#39;s operation and will only</span>
<span class="s">     be called after `start-source!`. Any outstanding items on the `source`</span>
<span class="s">     queue may still be consumed by a later processing stage.&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">update-source!</span>
<span class="w">    </span><span class="o">^</span><span class="nv">Workload</span>
<span class="w">    </span><span class="p">[</span><span class="o">^</span><span class="nv">Workload</span><span class="w"> </span><span class="nv">workload</span><span class="p">]</span>
<span class="w">    </span><span class="s">&quot;Enqueue items onto the `workload`&#39;s source queue to be consumed by a later processing</span>
<span class="s">     stage unless stopped, performing any external effects as necessary.</span>
<span class="s">     Implementations should avoid maintaining in-memory state and making long-</span>
<span class="s">     running external calls, favouring internal queues to manage such tasks</span>
<span class="s">     asynchronously between invocations. This function is called one or more</span>
<span class="s">     times after `start-source!` and may be called after `stop-source!`&quot;</span><span class="p">))</span>
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>Source</code> protocol is implemented by a set of multimethods of the same
name. The use of a protocol is to illustrate the difference between the
in-memory data model of a <code>Source</code> and the metadata seen by a user.</p>
</div>
<p>To be used in a workload,
a <code>Source</code> implementation
should satisfy the processing <code>Stage</code> protocol
and the <code>to-edn</code> multimethod
in addition to the following multimethods
specific to sinks:</p>
<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="kd">defmulti </span><span class="nv">create-source</span>
<span class="w">  </span><span class="s">&quot;Create a `Source` instance using the database `transaction` and configuration</span>
<span class="s">   in the source `request` and return a `[type items]` pair to be written to a</span>
<span class="s">   workload record as `source_type` and `source_items`.</span>
<span class="s">   Notes:</span>
<span class="s">   - This is a factory method registered for workload creation.</span>
<span class="s">   - The `Source` type string must match a value of the `source` enum in the</span>
<span class="s">     database schema.</span>
<span class="s">   - This multimethod is type-dispatched on the `:name` association in the</span>
<span class="s">     `request`.&quot;</span>
<span class="w">  </span><span class="p">(</span><span class="k">fn </span><span class="o">^</span><span class="p">[</span><span class="o">^</span><span class="nv">String</span><span class="w"> </span><span class="o">^</span><span class="nv">String</span><span class="p">]</span>
<span class="w">      </span><span class="p">[</span><span class="o">^</span><span class="nv">Connection</span><span class="w">         </span><span class="nv">transaction</span><span class="w">  </span><span class="c1">;; JDBC Connection</span>
<span class="w">       </span><span class="o">^</span><span class="nb">long </span><span class="w">              </span><span class="nv">workload-id</span><span class="w">  </span><span class="c1">;; ID of the workload being created</span>
<span class="w">       </span><span class="o">^</span><span class="nv">IPersistentHashMap</span><span class="w"> </span><span class="nv">request</span><span class="w">      </span><span class="c1">;; Data forwarded to the handler</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">      </span><span class="p">(</span><span class="ss">:name</span><span class="w"> </span><span class="nv">request</span><span class="p">)))</span>

<span class="p">(</span><span class="kd">defmulti </span><span class="nv">load-source!</span>
<span class="w">  </span><span class="s">&quot;Return the `Source` implementation associated with the `source_type` and</span>
<span class="s">   `source_items` fields of the `workload` row in the database. Note that this</span>
<span class="s">   multimethod is type-dispatched on the `:source_type` association in the</span>
<span class="s">   `workload`.&quot;</span>
<span class="w">  </span><span class="p">(</span><span class="k">fn </span><span class="o">^</span><span class="nv">Sink</span>
<span class="w">      </span><span class="p">[</span><span class="o">^</span><span class="nv">Connection</span><span class="w">         </span><span class="nv">transaction</span><span class="w">  </span><span class="c1">;; JDBC Connection</span>
<span class="w">       </span><span class="o">^</span><span class="nv">IPersistentHashMap</span><span class="w"> </span><span class="nv">workload</span><span class="w">     </span><span class="c1">;; Row from workload table</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">      </span><span class="p">(</span><span class="ss">:source_type</span><span class="w"> </span><span class="nv">workload</span><span class="p">)))</span>
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/broadinstitute/wfl" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.top", "navigation.sections", "navigation.instant"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": 2.0}</script>
    
    
      <script src="../assets/javascripts/bundle.a7c05c9e.min.js"></script>
      
    
  </body>
</html>