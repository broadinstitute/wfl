<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd
                        http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">
    <changeSet author="jwarren@broadinstitute.org"
               dbms="postgresql"
               id="20201101"
               logicalFilePath="20201101_CommonTable.xml">
        <comment>
            A table containing content common within workflows in a workload.
        </comment>
        <sql>
            CREATE TABLE common_within_workload (
                workload_id bigint NOT NULL,
                workflow_options text NULL,

                CONSTRAINT fk_workload_id
                    FOREIGN KEY (workload_id)
                    REFERENCES workload (id)
                    ON DELETE CASCADE
                    ON UPDATE CASCADE,
                CONSTRAINT workload_id_unique
                    UNIQUE (workload_id)
            );
        </sql>
    </changeSet>
</databaseChangeLog>
